<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/vkarpov15/wagner-core#readme">wagner-core (v0.2.0)</a>
</h1>
<h4>Dependency injector and DI-based async framework for writing modular, durable server code.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.wagner-core">module wagner-core</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.wagner-core">
            function <span class="apidocSignatureSpan"></span>wagner-core
            <span class="apidocSignatureSpan">(name, dependencies)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core._addTasks">
            function <span class="apidocSignatureSpan">wagner-core.</span>_addTasks
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core._getTasks">
            function <span class="apidocSignatureSpan">wagner-core.</span>_getTasks
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.clear">
            function <span class="apidocSignatureSpan">wagner-core.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.constant">
            function <span class="apidocSignatureSpan">wagner-core.</span>constant
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.factory">
            function <span class="apidocSignatureSpan">wagner-core.</span>factory
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.get">
            function <span class="apidocSignatureSpan">wagner-core.</span>get
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.invoke">
            function <span class="apidocSignatureSpan">wagner-core.</span>invoke
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.invokeAsync">
            function <span class="apidocSignatureSpan">wagner-core.</span>invokeAsync
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.module">
            function <span class="apidocSignatureSpan">wagner-core.</span>module
            <span class="apidocSignatureSpan">(name, dependencies)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.parallel">
            function <span class="apidocSignatureSpan">wagner-core.</span>parallel
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe">
            function <span class="apidocSignatureSpan">wagner-core.</span>safe
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.series">
            function <span class="apidocSignatureSpan">wagner-core.</span>series
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.task">
            function <span class="apidocSignatureSpan">wagner-core.</span>task
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">wagner-core.</span>safe.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.wagner-core.safe">module wagner-core.safe</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe.safe">
            function <span class="apidocSignatureSpan">wagner-core.</span>safe
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.wagner-core.safe.prototype">module wagner-core.safe.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe.prototype.emit">
            function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>emit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe.prototype.on">
            function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>on
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe.prototype.once">
            function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>once
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe.prototype.stream">
            function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>stream
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.wagner-core.safe.prototype.try">
            function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>try
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.wagner-core" id="apidoc.module.wagner-core">module wagner-core</a></h1>


    <h2>
        <a href="#apidoc.element.wagner-core.wagner-core" id="apidoc.element.wagner-core.wagner-core">
        function <span class="apidocSignatureSpan"></span>wagner-core
        <span class="apidocSignatureSpan">(name, dependencies)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wagner-core = function (name, dependencies) {
  return wagner.module(name, dependencies);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core._addTasks" id="apidoc.element.wagner-core._addTasks">
        function <span class="apidocSignatureSpan">wagner-core.</span>_addTasks
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addTasks = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core._getTasks" id="apidoc.element.wagner-core._getTasks">
        function <span class="apidocSignatureSpan">wagner-core.</span>_getTasks
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getTasks = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.clear" id="apidoc.element.wagner-core.clear">
        function <span class="apidocSignatureSpan">wagner-core.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.constant" id="apidoc.element.wagner-core.constant">
        function <span class="apidocSignatureSpan">wagner-core.</span>constant
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">constant = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

assert.equal(count, 1);

```

#### It allows you to `.get()` a dependency

`.<span class="apidocCodeKeywordSpan">constant</span>(a, b)` is a convenient shorthand for
`.factory(a, function() { return b; }`

```javascript

wagner.constant('eggs', 6);

wagner.task('bacon', function(eggs) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.factory" id="apidoc.element.wagner-core.factory">
        function <span class="apidocSignatureSpan">wagner-core.</span>factory
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">factory = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

You register 'services' with Wagner using the `factory()` function.
Services have a unique name - any function you pass through `factory()`
or `invoke()` can list services in its parameter list.

```javascript

wagner.<span class="apidocCodeKeywordSpan">factory</span>('bacon', function() {
  return 'bacon';
});

wagner.factory('breakfast', function(bacon) {
  return bacon + ' and eggs';
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.get" id="apidoc.element.wagner-core.get">
        function <span class="apidocSignatureSpan">wagner-core.</span>get
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  assert.equal(count, 1);
});

assert.equal(count, 1);

```

#### It allows you to `.<span class="apidocCodeKeywordSpan">get</span>()` a dependency

`.constant(a, b)` is a convenient shorthand for
`.factory(a, function() { return b; }`

```javascript

wagner.constant('eggs', 6);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.invoke" id="apidoc.element.wagner-core.invoke">
        function <span class="apidocSignatureSpan">wagner-core.</span>invoke
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">invoke = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      return 'bacon';
    });

    wagner.factory('breakfast', function(bacon) {
      return bacon + ' and eggs';
    });

    var result = wagner.<span class="apidocCodeKeywordSpan">invoke</span>(function(breakfast) {
      assert.equal(breakfast, 'bacon and eggs');
      return breakfast;
    });

    assert.equal(result, 'bacon and eggs');

```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.invokeAsync" id="apidoc.element.wagner-core.invokeAsync">
        function <span class="apidocSignatureSpan">wagner-core.</span>invokeAsync
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">invokeAsync = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    wagner.task('task1', function(callback) {
      setTimeout(function() {
        callback(null, 'test');
      }, 50);
    });

    wagner.<span class="apidocCodeKeywordSpan">invokeAsync</span>(function(error, task1) {
      assert.ok(!error);
      assert.equal(task1, 'test');
      done();
    });

```
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.module" id="apidoc.element.wagner-core.module">
        function <span class="apidocSignatureSpan">wagner-core.</span>module
        <span class="apidocSignatureSpan">(name, dependencies)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (name, dependencies) {
  modules[name] = wagnerFactory(name);
  if (dependencies &amp;&amp; dependencies.length) {
    for (var i = 0; i &lt; dependencies.length; ++i) {
      var module = modules[dependencies[i]];
      modules[name]._addTasks(module._getTasks());
    }
  }

  return modules[name];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.parallel" id="apidoc.element.wagner-core.parallel">
        function <span class="apidocSignatureSpan">wagner-core.</span>parallel
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parallel = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.safe" id="apidoc.element.wagner-core.safe">
        function <span class="apidocSignatureSpan">wagner-core.</span>safe
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">safe = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
If you're a NodeJS developer, you've probably gotten sick of writing the
following code:

```javascript
function(error, res) { if (error) { return handleError(error); } }
```

The `wagner.<span class="apidocCodeKeywordSpan">safe</span>()` function helps you make that cleaner.

#### It wraps callbacks to bubble up errors

`wagner.safe()` returns an event emitter that has a `try()` function.
Just wrap your callbacks in a `try()` and all async errors get deferred
to your event emitter. Like domains, but with less suck.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.series" id="apidoc.element.wagner-core.series">
        function <span class="apidocSignatureSpan">wagner-core.</span>series
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">series = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.task" id="apidoc.element.wagner-core.task">
        function <span class="apidocSignatureSpan">wagner-core.</span>task
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">task = function () {
  return instance[key].apply(instance, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
`.constant(a, b)` is a convenient shorthand for
`.factory(a, function() { return b; }`

```javascript

    wagner.constant('eggs', 6);

    wagner.<span class="apidocCodeKeywordSpan">task</span>('bacon', function(eggs) {
      return Math.floor(eggs / 2);
    });

    assert.equal(wagner.get('bacon'), 3);

```
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.wagner-core.safe" id="apidoc.module.wagner-core.safe">module wagner-core.safe</a></h1>


    <h2>
        <a href="#apidoc.element.wagner-core.safe.safe" id="apidoc.element.wagner-core.safe.safe">
        function <span class="apidocSignatureSpan">wagner-core.</span>safe
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Safe() {
  this._emitter = new EventEmitter();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
If you're a NodeJS developer, you've probably gotten sick of writing the
following code:

```javascript
function(error, res) { if (error) { return handleError(error); } }
```

The `wagner.<span class="apidocCodeKeywordSpan">safe</span>()` function helps you make that cleaner.

#### It wraps callbacks to bubble up errors

`wagner.safe()` returns an event emitter that has a `try()` function.
Just wrap your callbacks in a `try()` and all async errors get deferred
to your event emitter. Like domains, but with less suck.
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.wagner-core.safe.prototype" id="apidoc.module.wagner-core.safe.prototype">module wagner-core.safe.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.wagner-core.safe.prototype.emit" id="apidoc.element.wagner-core.safe.prototype.emit">
        function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>emit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function () {
  this._emitter.emit.apply(this._emitter, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this._emitter = new EventEmitter();
}

Safe.prototype.try = function(fn) {
  var _this = this;
  return function(error) {
if (error) {
  return _this._emitter.<span class="apidocCodeKeywordSpan">emit</span>('error', error);
}

try {
  fn.apply(_this, arguments);
} catch(err) {
  _this._emitter.emit('error', err);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.safe.prototype.on" id="apidoc.element.wagner-core.safe.prototype.on">
        function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>on
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function () {
  this._emitter.on.apply(this._emitter, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    };

    asyncOpThatErrors(safe.try(function(error) {
      // Never gets called: safe catches the error
      assert.ok(false);
    }));

    safe.<span class="apidocCodeKeywordSpan">on</span>('error', function(error) {
      assert.equal(error, 'This is an error!');
      done();
    });

```

#### It catches exceptions too
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.safe.prototype.once" id="apidoc.element.wagner-core.safe.prototype.once">
        function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>once
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">once = function () {
  this._emitter.once.apply(this._emitter, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.safe.prototype.stream" id="apidoc.element.wagner-core.safe.prototype.stream">
        function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>stream
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stream = function (stream) {
  var _this = this;
  stream.on('error', function(error) {
    _this.emit('error', error);
    stream.destroy();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.wagner-core.safe.prototype.try" id="apidoc.element.wagner-core.safe.prototype.try">
        function <span class="apidocSignatureSpan">wagner-core.safe.prototype.</span>try
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">try = function (fn) {
  var _this = this;
  return function(error) {
    if (error) {
      return _this._emitter.emit('error', error);
    }

    try {
      fn.apply(_this, arguments);
    } catch(err) {
      _this._emitter.emit('error', err);
    }
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

var asyncOpThatErrors = function(callback) {
  setTimeout(function() {
    callback('This is an error!');
  });
};

asyncOpThatErrors(safe.<span class="apidocCodeKeywordSpan">try</span>(function(error) {
  // Never gets called: safe catches the error
  assert.ok(false);
}));

safe.on('error', function(error) {
  assert.equal(error, 'This is an error!');
  done();
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>